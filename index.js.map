{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = (imgInfo) => {\n    return `<li class=\"gallery-card\">\n        <a href=\"${imgInfo.largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n        </a>\n        <div class=\"gallery-info\">\n            <p><b>Likes:</b> ${imgInfo.likes}</p>\n            <p><b>Views:</b> ${imgInfo.views}</p>\n            <p><b>Comments:</b> ${imgInfo.comments}</p>\n            <p><b>Downloads:</b> ${imgInfo.downloads}</p>\n        </div>\n    </li>`;\n}","import axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com';\nexport const fetchPhotos = async (searchValue, page) => {\n   \n    const axiosOptions = {\n        params: {\n           q: searchValue,\n        image_type: 'photos',\n        orientation: 'horizontal',\n        safesearch: true,\n            key: '46112845-f959e042da8238bb9faecb37a', \n            per_page: 15,\n        page: page,\n        }\n    }\n    const response = await axios.get(`/api/`, axiosOptions);\n    return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createGalleryCard } from \"./js/render-functions.js\";\nimport { fetchPhotos } from \"./js/pixabay-api.js\";\n\nconst button = document.querySelector(\".main-button\");\nconst searchFormEl = document.querySelector(\".main-form\");\nconst inputEl = document.querySelector(\".main-input\");\nconst galleryEl = document.querySelector(\".js-list\");\nconst loadMoreBtnEl = document.querySelector(\".js-load-more\");\nconst loaderEl = document.querySelector(\".loader\");\nconst lightbox = new SimpleLightbox('.gallery-card a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nlet currentPage = 1;\nlet searchValue = \"\";\nlet cardHeight = 0;\n\nconst onSearchFormSubmit = async event => {\n    event.preventDefault();\n    galleryEl.innerHTML = '';\n    searchValue = inputEl.value.trim();\n    currentPage = 1;\n\n    if (searchValue === \"\") {\n        return iziToast.show({\n            message: 'Please fill out the form!',\n            position: \"topRight\",\n            color: 'red'\n        });\n    }\n\n    loaderEl.classList.remove('is-hidden');\n\n    try {\n        const data = await fetchPhotos(searchValue, currentPage);\n\n        if (data.hits.length === 0) {\n            loadMoreBtnEl.classList.add(\"is-hidden\");\n            return iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n                color: 'red',\n            });\n        }\n\n        const galleryMarkup = data.hits.map(createGalleryCard).join('');\n        galleryEl.innerHTML = galleryMarkup;\n        const galleryCardEl = galleryEl.querySelector(\"li\");\n\n        cardHeight = galleryCardEl.getBoundingClientRect().height;\n        lightbox.refresh();\n\n        \n        if (data.hits.length < 15) {\n            loadMoreBtnEl.classList.add(\"is-hidden\");\n        } else {\n            loadMoreBtnEl.classList.remove(\"is-hidden\");\n        }\n\n    } catch (error) {\n        console.log(error);\n\n    } finally {\n        loaderEl.classList.add('is-hidden');\n        searchFormEl.reset();\n    }\n};\n\nconst onLoadMoreBtnClick = async event => {\n    try {\n        currentPage++;\n        const data = await fetchPhotos(searchValue, currentPage);\n        const galleryMarkup = data.hits.map(createGalleryCard).join('');\n        galleryEl.insertAdjacentHTML('beforeend', galleryMarkup);\n        scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n\n        \n        if (data.hits.length < 15 || currentPage * 15 >= data.totalHits) {\n            loadMoreBtnEl.classList.add(\"is-hidden\");\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                color: 'blue',\n            });\n        }\n\n    } catch (error) {\n        console.log(error);\n    }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["createGalleryCard","imgInfo","axios","fetchPhotos","searchValue","page","axiosOptions","searchFormEl","inputEl","galleryEl","loadMoreBtnEl","loaderEl","lightbox","SimpleLightbox","currentPage","cardHeight","onSearchFormSubmit","event","iziToast","data","galleryMarkup","error","onLoadMoreBtnClick"],"mappings":"owBAAO,MAAMA,EAAqBC,GACvB;AAAA,mBACQA,EAAQ,aAAa;AAAA,4CACIA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,+BAGvDA,EAAQ,KAAK;AAAA,+BACbA,EAAQ,KAAK;AAAA,kCACVA,EAAQ,QAAQ;AAAA,mCACfA,EAAQ,SAAS;AAAA;AAAA,WCRpDC,EAAM,SAAS,QAAU,sBAClB,MAAMC,EAAc,MAAOC,EAAaC,IAAS,CAEpD,MAAMC,EAAe,CACjB,OAAQ,CACL,EAAGF,EACN,WAAY,SACZ,YAAa,aACb,WAAY,GACR,IAAK,qCACL,SAAU,GACd,KAAMC,CACL,CACJ,EAED,OADiB,MAAMH,EAAM,IAAI,QAASI,CAAY,GACtC,IACpB,ECVe,SAAS,cAAc,cAAc,EACpD,MAAMC,EAAe,SAAS,cAAc,YAAY,EAClDC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAgB,SAAS,cAAc,eAAe,EACtDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAW,IAAIC,EAAe,kBAAmB,CACnD,aAAc,MACd,aAAc,GAClB,CAAC,EACD,IAAIC,EAAc,EACdV,EAAc,GACdW,EAAa,EAEjB,MAAMC,EAAqB,MAAMC,GAAS,CAMtC,GALAA,EAAM,eAAc,EACpBR,EAAU,UAAY,GACtBL,EAAcI,EAAQ,MAAM,OAC5BM,EAAc,EAEVV,IAAgB,GAChB,OAAOc,EAAS,KAAK,CACjB,QAAS,4BACT,SAAU,WACV,MAAO,KACnB,CAAS,EAGLP,EAAS,UAAU,OAAO,WAAW,EAErC,GAAI,CACA,MAAMQ,EAAO,MAAMhB,EAAYC,EAAaU,CAAW,EAEvD,GAAIK,EAAK,KAAK,SAAW,EACrB,OAAAT,EAAc,UAAU,IAAI,WAAW,EAChCQ,EAAS,KAAK,CACjB,QAAS,2EACT,SAAU,WACV,MAAO,KACvB,CAAa,EAGL,MAAME,EAAgBD,EAAK,KAAK,IAAInB,CAAiB,EAAE,KAAK,EAAE,EAC9DS,EAAU,UAAYW,EAGtBL,EAFsBN,EAAU,cAAc,IAAI,EAEvB,sBAAuB,EAAC,OACnDG,EAAS,QAAO,EAGZO,EAAK,KAAK,OAAS,GACnBT,EAAc,UAAU,IAAI,WAAW,EAEvCA,EAAc,UAAU,OAAO,WAAW,CAGjD,OAAQW,EAAO,CACZ,QAAQ,IAAIA,CAAK,CAEzB,QAAc,CACNV,EAAS,UAAU,IAAI,WAAW,EAClCJ,EAAa,MAAK,CACrB,CACL,EAEMe,EAAqB,MAAML,GAAS,CACtC,GAAI,CACAH,IACA,MAAMK,EAAO,MAAMhB,EAAYC,EAAaU,CAAW,EACjDM,EAAgBD,EAAK,KAAK,IAAInB,CAAiB,EAAE,KAAK,EAAE,EAC9DS,EAAU,mBAAmB,YAAaW,CAAa,EACvD,SAAS,CACL,IAAKL,EAAa,EAClB,SAAU,QACtB,CAAS,GAGGI,EAAK,KAAK,OAAS,IAAML,EAAc,IAAMK,EAAK,aAClDT,EAAc,UAAU,IAAI,WAAW,EACvCQ,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,WACV,MAAO,MACvB,CAAa,EAGR,OAAQG,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACpB,CACL,EAEAd,EAAa,iBAAiB,SAAUS,CAAkB,EAC1DN,EAAc,iBAAiB,QAASY,CAAkB"}